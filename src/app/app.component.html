<app-splash-screen *ngIf="!isUserLogged"
  (connectRequest)="onConnectRequest($event)"></app-splash-screen>

<mat-sidenav-container *ngIf="isUserLogged" [hasBackdrop]="false" class="container">

  <mat-sidenav-content>

    <div class="content" fxLayout="column" fxLayoutAlign="start stretch">

      <mat-toolbar color="primary" fxLayout="row" fxLayoutAlign="start center" class="mat-elevation-z4">
        <button mat-flat-button color="primary" class="menu-button" (click)="sidenav.toggle()">
          <mat-icon>menu</mat-icon>
        </button>
        <div fxLayout="row" fxLayoutAlign="center center">
          <span [matBadge]="chatManager.chat().stats.messages.new"
                matBadgeColor="accent"
                [matBadgeHidden]="!(chatManager && chatManager.chat().target().name && chatManager.chat().stats.messages.new > 0)"
                matBadgeOverlap="false">{{ chatManager && chatManager.chat().target().name || 'NgWebIRC' }}</span>
        </div>
        <span class="flex-fill"></span>
        <div class="right-toolbar">
          <button mat-icon-button class="icon-big" *ngIf="chatManager.channel()"
                  (click)="onChannelButtonClick(chatManager)"
                  [matBadge]="chatManager.channel().users.length"
                  matBadgePosition="after" matBadgeColor="primary">
            <mat-icon>people_alt</mat-icon>
          </button>
          <button mat-icon-button class="icon-big"
                  (click)="chatManager.showChatList()"
                  [matBadge]="chatManager.newMessageCount()"
                  [matBadgeHidden]="chatManager.newMessageCount() === 0 || (!chatManager.showUserList && chatManager.showRightPanel)"
                  matBadgePosition="after" matBadgeColor="accent">
            <mat-icon>forum</mat-icon>
          </button>
        </div>
      </mat-toolbar>

      <app-chat-manager #chatManager [nick]="nick"></app-chat-manager>

    </div>

  </mat-sidenav-content>

  <mat-sidenav #sidenav mode="side" opened="false" position="start">

  </mat-sidenav>

</mat-sidenav-container>


